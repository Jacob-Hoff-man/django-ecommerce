{"ast":null,"code":"import _slicedToArray from\"/Users/jacob/Web/django-ecommerce/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useParams,useNavigate}from'react-router-dom';import{Row,Col,Image,ListGroup,Button,Card,Form,Table}from'react-bootstrap';// react redux import for global state handling+API calls\nimport{useDispatch,useSelector}from'react-redux';import{listEventDetails,listRaffleTickets,createRaffleTicket}from'../reduxState/actions/eventActions';// components\nimport Loader from'../components/Loader';import Message from'../components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EventView(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var dispatch=useDispatch();var eventDetailsState=useSelector(function(state){return state.eventDetails;});var loading=eventDetailsState.loading,event=eventDetailsState.event,error=eventDetailsState.error;var raffleTicketsState=useSelector(function(state){return state.raffleTickets;});var raffleTicketsLoading=raffleTicketsState.loading,raffleTickets=raffleTicketsState.raffleTickets,raffleTicketsError=raffleTicketsState.error;var raffleTicketCreateState=useSelector(function(state){return state.raffleTicketCreate;});var raffleTicketCreateError=raffleTicketCreateState.error;useEffect(function(){dispatch(listEventDetails(id));dispatch(listRaffleTickets(id));},[dispatch,id]);var submitHandler=function submitHandler(e){e.preventDefault();console.log('submitted raffle ticket');setMessage('');dispatch(createRaffleTicket({'event':event,'name':name,'email':email}));setMessage('Your raffle ticket was successfully entered.');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-light my-3\",children:\"Return\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"warning\",children:error}):/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{sm:8,children:[/*#__PURE__*/_jsx(Row,{className:\"pb-5\",children:/*#__PURE__*/_jsx(Image,{src:event.image,alt:event.eventName,fluid:true})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"h3\",{children:event.eventName})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Category: \",event.category]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Description: \",event.description]})]})})]}),/*#__PURE__*/_jsx(Col,{sm:1}),/*#__PURE__*/_jsxs(Col,{sm:3,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"mt-5\",style:{textAlign:'center'},children:\"Enter Raffle For a Chance to Win!\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[raffleTicketCreateError?/*#__PURE__*/_jsx(Message,{variant:\"warning\",children:raffleTicketCreateError}):message&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:message}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"my-4\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"name\",placeholder:\"Enter Name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"my-4\",controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Submit\"})]})]})]})}),/*#__PURE__*/_jsx(Row,{className:\"pt-4\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center'},children:\"Raffle Entries\"}),raffleTicketsLoading?/*#__PURE__*/_jsx(Loader,{}):raffleTicketsError?/*#__PURE__*/_jsx(Message,{variant:\"warning\",children:raffleTicketsError}):/*#__PURE__*/_jsxs(Table,{striped:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:raffleTickets.map(function(ticket){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ticket.name}),/*#__PURE__*/_jsx(\"td\",{children:ticket.email})]},ticket._id);})})]})]})})]})]})]});}export default EventView;","map":{"version":3,"sources":["/Users/jacob/Web/django-ecommerce/backend/frontend/src/views/EventView.js"],"names":["React","useState","useEffect","Link","useParams","useNavigate","Row","Col","Image","ListGroup","Button","Card","Form","Table","useDispatch","useSelector","listEventDetails","listRaffleTickets","createRaffleTicket","Loader","Message","EventView","id","name","setName","email","setEmail","message","setMessage","dispatch","eventDetailsState","state","eventDetails","loading","event","error","raffleTicketsState","raffleTickets","raffleTicketsLoading","raffleTicketsError","raffleTicketCreateState","raffleTicketCreate","raffleTicketCreateError","submitHandler","e","preventDefault","console","log","image","eventName","textAlign","category","description","target","value","map","ticket","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react'\nimport { Link, useParams, useNavigate } from 'react-router-dom'\nimport { Row, Col, Image, ListGroup, Button, Card, Form, Table } from 'react-bootstrap'\n// react redux import for global state handling+API calls\nimport { useDispatch, useSelector } from 'react-redux'\nimport { listEventDetails, listRaffleTickets, createRaffleTicket } from '../reduxState/actions/eventActions'\n// components\nimport Loader from '../components/Loader'\nimport Message from '../components/Message'\n\nfunction EventView() {\n    const {id} = useParams()\n    const [name, setName] = useState('')\n    const [email, setEmail] = useState('')\n    const [message, setMessage] = useState('')\n\n    const dispatch = useDispatch()\n\n    const eventDetailsState = useSelector(state => state.eventDetails)\n    const { loading, event, error } = eventDetailsState\n    \n    const raffleTicketsState = useSelector(state => state.raffleTickets)\n    const { loading: raffleTicketsLoading , raffleTickets, error: raffleTicketsError } = raffleTicketsState\n\n    const raffleTicketCreateState = useSelector(state => state.raffleTicketCreate)\n    const { error: raffleTicketCreateError } = raffleTicketCreateState\n\n    useEffect(() => {\n        dispatch(listEventDetails(id))\n        dispatch(listRaffleTickets(id))\n    }, [dispatch, id])\n\n    const submitHandler = (e) => {\n        e.preventDefault()\n        console.log('submitted raffle ticket')\n        setMessage('')\n\n        dispatch(createRaffleTicket({\n            'event': event,\n            'name': name,\n            'email': email\n            \n        }))\n        setMessage('Your raffle ticket was successfully entered.')\n\n    }\n\n    return (\n        <div>\n            <Link to='/' className='btn btn-light my-3'>Return</Link>\n            {\n                loading ? <Loader />\n                        : error ? <Message variant='warning' children={error} /> \n                                : (\n                                    <Row>\n                                        <Col sm={8}>\n                                            <Row className='pb-5'>\n                                                <Image src={event.image} alt={event.eventName} fluid /> \n                                            </Row>\n\n                                            <Row>\n                                                <ListGroup variant=\"flush\">\n                                                    <ListGroup.Item style={{textAlign: 'center'}}>\n                                                        <h3>{event.eventName}</h3>\n                                                    </ListGroup.Item>\n\n                                                    <ListGroup.Item>\n                                                        Category: {event.category}\n                                                    </ListGroup.Item>\n\n                                                    <ListGroup.Item>\n                                                        Description: {event.description}\n                                                    </ListGroup.Item> \n                                                </ListGroup>\n                                            </Row>\n\n                                        </Col>    \n                                        <Col sm={1}/>\n                                        <Col sm={3}>\n                                            <Row>\n                                                <Card>\n                                                    <Card.Title className='mt-5' style={{textAlign: 'center'}}>Enter Raffle For a Chance to Win!</Card.Title>\n                                                    <Card.Body>\n                                                        { raffleTicketCreateError ? (<Message variant='warning'>{raffleTicketCreateError}</Message>) :\n                                                            (message && <Message variant='success'>{message}</Message>)\n                                                        }\n                                                        <Form onSubmit={submitHandler}>\n                                                            <Form.Group className='my-4' controlId='name'>\n                                                                <Form.Label>Name</Form.Label>\n                                                                <Form.Control \n                                                                    required\n                                                                    type='name' \n                                                                    placeholder='Enter Name' \n                                                                    value={name} \n                                                                    onChange={(e) => setName(e.target.value)}\n                                                                />\n                                                            </Form.Group>\n\n                                                            <Form.Group className='my-4' controlId='email'>\n                                                                <Form.Label>Email Address</Form.Label>\n                                                                <Form.Control \n                                                                    required\n                                                                    type='email' \n                                                                    placeholder='Enter Email' \n                                                                    value={email} \n                                                                    onChange={(e) => setEmail(e.target.value)}\n                                                                />\n                                                            </Form.Group>\n\n                                                            <Button type='submit' variant='primary'>Submit</Button>\n\n                                                        </Form>\n                                                    </Card.Body>\n                                                </Card>\n                                            </Row>\n                                            <Row className= 'pt-4'>\n                                                <Col>\n                                                    <h2 style={{textAlign: 'center'}}>Raffle Entries</h2>\n                                                    { raffleTicketsLoading ? (\n                                                        <Loader />\n                                                    ) : raffleTicketsError ? (\n                                                        <Message variant='warning'>{raffleTicketsError}</Message>\n                                                    ) : (\n                                                        \n                                                        <Table  striped responsive className='table-sm'>\n                                                            <thead>\n                                                                <tr>\n                                                                    <th>Name</th>\n                                                                    <th>Email</th>\n                                                                </tr>\n                                                            </thead>\n                                                            <tbody >\n                                                                    {raffleTickets.map(ticket => (\n                                                                        <tr key={ticket._id}>\n                                                                            <td>{ticket.name}</td>\n                                                                            <td>{ticket.email}</td>\n                                                                        </tr>\n                                                                    ))}\n                                                            </tbody>\n                                                        </Table>\n                                                     \n                                                    )}\n                                                </Col>\n\n                                            </Row>\n                                        </Col>\n\n                                    </Row>\n                                )\n\n            }\n                \n        </div>\n    )\n}\n\nexport default EventView"]},"metadata":{},"sourceType":"module"}